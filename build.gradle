/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.4/userguide/java_library_plugin.html
 */


plugins {
    id 'groovy'
}

repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

configurations {
    // Add the dependencies that are not included in any repositories and should be added manually
    extraLibs
}

dependencies {
    // All the custom jars are placed in the libs library
    implementation fileTree(dir: 'libs', include: '*.jar')

    test {
        useJUnitPlatform()
    }

    extraLibs 'me.tongfei:progressbar:0.9.3'

    // The dependencies in extraLibs will be compiled and will be contained in the jar as well
    configurations.implementation.extendsFrom(configurations.extraLibs)

    // Unit tests are created by using the Spock framework
    testImplementation(
            'junit:junit:4.13.2',
            'org.codehaus.groovy:groovy-all:3.0.8',
            'org.spockframework:spock-core:2.0-M5-groovy-3.0',
            'net.bytebuddy:byte-buddy:1.11.0',
            'org.objenesis:objenesis:3.2'
    )

    test {
        useJUnitPlatform()
    }

    jar {
        manifest {
            attributes 'Main-Class': 'gr.aueb.cyclon.CyclonSimulator'
        }
        from {
            // Add the extraLib dependencies in the jars
            configurations.extraLibs.collect { it.isDirectory() ? it : zipTree(it) }
        }
    }
}


